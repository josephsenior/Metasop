{
  "step_id": "devops_infrastructure",
  "role": "DevOps",
  "content": {
    "infrastructure": {
      "cloud_provider": "AWS",
      "services": [
        {
          "name": "EduPulse-EKS-Cluster",
          "type": "compute",
          "description": "Managed Kubernetes cluster for microservices orchestration across multiple availability zones."
        },
        {
          "name": "EduPulse-Aurora-Postgres",
          "type": "database",
          "description": "Multi-region Aurora PostgreSQL with global database clusters for low-latency data access."
        },
        {
          "name": "EduPulse-S3-Content",
          "type": "storage",
          "description": "Object storage for raw and transcoded video assets with cross-region replication."
        },
        {
          "name": "EduPulse-CloudFront",
          "type": "cdn",
          "description": "Global CDN for low-latency delivery of HLS video segments and static assets."
        },
        {
          "name": "EduPulse-MSK-Kafka",
          "type": "networking",
          "description": "Managed Streaming for Apache Kafka to handle event-driven microservices communication."
        },
        {
          "name": "EduPulse-ALB",
          "type": "load-balancer",
          "description": "Application Load Balancer with WAF integration for secure traffic distribution."
        }
      ],
      "iac": "Terraform",
      "regions": [
        "us-east-1",
        "eu-central-1",
        "ap-southeast-1"
      ]
    },
    "cicd": {
      "pipeline_stages": [
        {
          "name": "Continuous Integration",
          "steps": [
            "Linting and Static Analysis",
            "Unit and Integration Testing",
            "Container Image Build",
            "Vulnerability Scanning (Trivy)"
          ],
          "description": "Validates code quality and security before artifact creation.",
          "status": "active"
        },
        {
          "name": "Artifact Management",
          "steps": [
            "Push to Amazon ECR",
            "Sign Images with Cosign"
          ],
          "description": "Securely stores and signs container images.",
          "status": "active"
        },
        {
          "name": "Continuous Deployment",
          "steps": [
            "ArgoCD Sync",
            "Canary Analysis",
            "Automated Rollback on Failure"
          ],
          "description": "GitOps-based deployment to Kubernetes environments.",
          "status": "active"
        }
      ],
      "tools": [
        "GitHub Actions",
        "ArgoCD",
        "Amazon ECR",
        "Snyk"
      ],
      "triggers": [
        {
          "type": "push",
          "branch": "main",
          "description": "Triggers production deployment pipeline."
        },
        {
          "type": "pull_request",
          "branch": "develop",
          "description": "Triggers CI and staging preview."
        }
      ]
    },
    "deployment": {
      "strategy": "canary",
      "environments": [
        {
          "name": "development",
          "configuration": {
            "key": "instance_type",
            "value": "t3.medium"
          },
          "description": "Sandbox for feature development and testing."
        },
        {
          "name": "staging",
          "configuration": {
            "key": "replica_count",
            "value": "3"
          },
          "description": "Pre-production environment mirroring production configuration."
        },
        {
          "name": "production",
          "configuration": {
            "key": "multi_az",
            "value": "true"
          },
          "description": "High-availability global production environment."
        }
      ],
      "rollback_strategy": "Automated rollback via Argo Rollouts based on Prometheus error rate metrics exceeding 1% threshold during canary phase."
    },
    "monitoring": {
      "tools": [
        "Prometheus",
        "Grafana",
        "Datadog APM",
        "Jaeger"
      ],
      "metrics": [
        "Request Latency (P99)",
        "Error Rate per Microservice",
        "Kafka Consumer Lag",
        "HPA Scaling Events",
        "CDN Cache Hit Ratio"
      ],
      "alerts": [
        {
          "name": "High Error Rate",
          "condition": "sum(rate(http_requests_total{status=~\"5..\"}[5m])) / sum(rate(http_requests_total[5m])) > 0.05",
          "severity": "critical"
        },
        {
          "name": "Latency Spike",
          "condition": "histogram_quantile(0.99, sum by (le) (rate(http_request_duration_seconds_bucket[5m]))) > 2",
          "severity": "warning"
        }
      ],
      "logging": {
        "retention": "30 days",
        "tools": [
          "Fluentbit",
          "Amazon CloudWatch Logs",
          "Elasticsearch"
        ]
      }
    },
    "containerization": {
      "docker_compose": "version: '3.8'\nservices:\n  api:\n    build: .\n    ports:\n      - \"8080:8080\"\n    environment:\n      - DB_URL=postgres://user:pass@db:5432/edupulse",
      "dockerfile": "FROM golang:1.21-alpine AS builder\nWORKDIR /app\nCOPY . .\nRUN go build -o main .\nFROM alpine:latest\nCOPY --from=builder /app/main /main\nENTRYPOINT [\"/main\"]",
      "kubernetes": {
        "deployments": [
          {
            "name": "learning-engine",
            "replicas": 5,
            "resources": {
              "cpu": "500m",
              "memory": "1Gi"
            }
          },
          {
            "name": "ai-recommendation",
            "replicas": 3,
            "resources": {
              "cpu": "2",
              "memory": "4Gi"
            }
          }
        ],
        "namespace": "edupulse-prod",
        "services": [
          {
            "name": "api-gateway",
            "ports": [
              {
                "port": 80,
                "targetPort": 8080
              }
            ],
            "type": "LoadBalancer"
          }
        ]
      }
    },
    "scaling": {
      "auto_scaling": {
        "enabled": true,
        "max_replicas": 50,
        "min_replicas": 3,
        "target_cpu": 70,
        "target_memory": 80
      },
      "manual_scaling": {
        "replicas": 10
      }
    },
    "disaster_recovery": {
      "rpo": "15 minutes",
      "rto": "60 minutes",
      "backup_strategy": "Daily RDS snapshots with cross-region copy; S3 Versioning and Cross-Region Replication (CRR) enabled for all course content.",
      "failover_plan": "Route53 Health Checks trigger DNS failover to secondary region; Global Aurora Database promotion to primary in standby region."
    },
    "summary": "Production-grade AWS infrastructure utilizing EKS for orchestration, Aurora for global data consistency, and a GitOps CI/CD pipeline for secure, automated deployments.",
    "description": "The EduPulse SRE strategy focuses on high availability and global performance. It leverages Terraform for multi-region provisioning, ArgoCD for canary deployments, and a comprehensive observability stack to maintain 99.99% uptime for 50,000 concurrent learners.",
    "cloud_provider": "AWS",
    "infra_components": 12
  }
}